<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Plan zajęć UMG</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        table { border-collapse:collapse; }
        table td, table th {
            border: 1px solid #ddd;
            padding: 8px;
        }
        table tr:nth-child(even){background-color: #f2f2f2;}
        table tr:hover {background-color: #ddd;}
        table th {
            padding-top: 12px;
            padding-bottom: 12px;
            text-align: left;
            background-color: #4CAF50;
            color: white;
        }
    </style>
</head>

<body>
    <h2>Stwórz tabelę wszystkich zajęć przypisanych do twojego numeru albumu</h2>
    <h4>Grupy: W-wykładowa; C-ćwiczeniowa; LS-laboratoria statystyka; LI-laboratoria informatyka; A-angielski; B-basen; E-wybieralny</h4>

    <input type="number" name="index" id="index" placeholder="Nr. Albumu" onkeydown="if (event.keyCode == 13) create_tables()">
    <button onclick="create_tables()">Generuj</button>
    <div style="display:flex;">
        <table id="even">
        <tbody class="monday">
            <tr>
                <th colspan="5">Poniedziałek</th>
            </tr>
            <tr>
                <td>Czas</td>
                <td>Nazwa</td>
                <td>Prowadzący</td>
                <td>Sala</td>
                <td>Grupy</td>
            </tr>
        </tbody>
        <tbody class="tuesday">
            <tr>
                <th colspan="5">Wtorek</th>
            </tr>
            <tr>
                <td>Czas</td>
                <td>Nazwa</td>
                <td>Prowadzący</td>
                <td>Sala</td>
                <td>Grupy</td>
            </tr>
        </tbody>
        <tbody class="wednesday">
            <tr>
                <th colspan="5">Środa</th>
            </tr>
            <tr>
                <td>Czas</td>
                <td>Nazwa</td>
                <td>Prowadzący</td>
                <td>Sala</td>
                <td>Grupy</td>
            </tr>
        </tbody>
        <tbody class="thursday">
            <tr>
                <th colspan="5">Czwartek</th>
            </tr>
            <tr>
                <td>Czas</td>
                <td>Nazwa</td>
                <td>Prowadzący</td>
                <td>Sala</td>
                <td>Grupy</td>
            </tr>
        </tbody>
        <tbody class="friday">
            <tr>
                <th colspan="5">Piątek</th>
            </tr>
            <tr>
                <td>Czas</td>
                <td>Nazwa</td>
                <td>Prowadzący</td>
                <td>Sala</td>
                <td>Grupy</td>
            </tr>
        </tbody>
        </table>
        <table id="odd">
        <tbody class="monday">
            <tr>
                <th colspan="5">Poniedziałek</th>
            </tr>
            <tr>
                <td>Czas</td>
                <td>Nazwa</td>
                <td>Prowadzący</td>
                <td>Sala</td>
                <td>Grupy</td>
            </tr>
        </tbody>
        <tbody class="tuesday">
            <tr>
                <th colspan="5">Wtorek</th>
            </tr>
            <tr>
                <td>Czas</td>
                <td>Nazwa</td>
                <td>Prowadzący</td>
                <td>Sala</td>
                <td>Grupy</td>
            </tr>
        </tbody>
        <tbody class="wednesday">
            <tr>
                <th colspan="5">Środa</th>
            </tr>
            <tr>
                <td>Czas</td>
                <td>Nazwa</td>
                <td>Prowadzący</td>
                <td>Sala</td>
                <td>Grupy</td>
            </tr>
        </tbody>
        <tbody class="thursday">
            <tr>
                <th colspan="5">Czwartek</th>
            </tr>
            <tr>
                <td>Czas</td>
                <td>Nazwa</td>
                <td>Prowadzący</td>
                <td>Sala</td>
                <td>Grupy</td>
            </tr>
        </tbody>
        <tbody class="friday">
            <tr>
                <th colspan="5">Piątek</th>
            </tr>
            <tr>
                <td>Czas</td>
                <td>Nazwa</td>
                <td>Prowadzący</td>
                <td>Sala</td>
                <td>Grupy</td>
            </tr>
        </tbody>
        </table>
    </div>
    <script>
        var plan;
        var uczen;
        var days = [document.getElementsByTagName('table').even.getElementsByTagName('tbody'),document.getElementsByTagName('table').odd.getElementsByTagName('tbody')];
        // using Promise
        fetch("https://raw.githubusercontent.com/pojebunny/Timetable-creator/master/plan.json")
            .then(response => response.json())
            .then(data => plan = data);
        fetch("https://raw.githubusercontent.com/pojebunny/Timetable-creator/master/uczen.json")
            .then(response => response.json())
            .then(data => uczen = data);


        function create_tables() {
            var index = document.getElementById('index').value;
            for (var i = 0; i < days[0].length; i++) {
                for (var j = 0; j < plan[days[0][i].className].length; j++) {
                    if(plan[days[0][i].className][j].group.indexOf("W" + uczen[index][0]) >= 0 
                    || plan[days[0][i].className][j].group.indexOf("C" + uczen[index][1]) >= 0
                    || plan[days[0][i].className][j].group.indexOf("LS" + uczen[index][2]) >= 0
                    || plan[days[0][i].className][j].group.indexOf("LI" + uczen[index][3]) >= 0
                    || plan[days[0][i].className][j].group.indexOf("A" + uczen[index][4]) >= 0
                    || plan[days[0][i].className][j].group.indexOf("B" + uczen[index][5]) >= 0
                    || plan[days[0][i].className][j].group.indexOf("E") >= 0
                    ){
                        var tr = "<tr>" + "<td>" + plan[days[0][i].className][j].start.toString() + " - " + plan[days[0][i].className][j].end.toString() + "</td> <td>" + plan[days[0][i].className][j].name + "</td><td>" + plan[days[0][i].className][j].teacher + "</td><td>" + plan[days[0][i].className][j].room + "</td><td>" + plan[days[0][i].className][j].group + "</td></tr>";
                        if(plan[days[0][i].className][j].week != 2){
                            days[0][i].innerHTML += tr;
                        }
                        if (plan[days[0][i].className][j].week != 1){
                            days[1][i].innerHTML += tr;
                        }
                    }
                }
            }
        }
    </script>
</body>

</html>